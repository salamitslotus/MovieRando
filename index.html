<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,maximum-scale=5" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="theme-color" content="#c41e3a" />
  <title>Movie Rando Fragrant</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="container">
    <div class="header">
      <h1>Movie Rando</h1>
      <div class="header-controls">
        <button id="colorCustomizer" class="icon-btn" aria-label="Customize colors">üé®</button>
        <button id="darkModeToggle" class="icon-btn dark-mode-toggle" aria-label="Toggle dark mode">üåô</button>
      </div>
    </div>

    <!-- Color Theme Selector Modal -->
    <div id="colorModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Choose Theme</h2>
          <button class="modal-close" aria-label="Close">‚úï</button>
        </div>
        <div class="modal-body">
          <p class="theme-description">Select a color theme to customize your experience</p>
          <div class="theme-grid">
            <button class="theme-option" data-theme="default" title="Default Theme">
              <div class="theme-swatch" style="background-color: #e11d48;"></div>
              <span>Default</span>
            </button>
            <button class="theme-option" data-theme="ocean" title="Ocean Theme">
              <div class="theme-swatch" style="background-color: #0066cc;"></div>
              <span>Ocean</span>
            </button>
            <button class="theme-option" data-theme="forest" title="Forest Theme">
              <div class="theme-swatch" style="background-color: #10b981;"></div>
              <span>Forest</span>
            </button>
            <button class="theme-option" data-theme="sunset" title="Sunset Theme">
              <div class="theme-swatch" style="background-color: #f97316;"></div>
              <span>Sunset</span>
            </button>
            <button class="theme-option" data-theme="purple" title="Purple Theme">
              <div class="theme-swatch" style="background-color: #7c3aed;"></div>
              <span>Purple</span>
            </button>
            <button class="theme-option" data-theme="indigo" title="Indigo Theme">
              <div class="theme-swatch" style="background-color: #4f46e5;"></div>
              <span>Indigo</span>
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button id="closeColorModal" class="btn-primary">Done</button>
        </div>
      </div>
    </div>
    <div id="colorModalBackdrop" class="modal-backdrop"></div>

    <section class="controls">
      <p class="subtitle">Pick a genre and discover your next favorite movie!</p>

      <div class="genre-tabs" role="tablist" aria-label="Genre tabs">
        <button class="genre-tab active" data-genre="all" role="tab" aria-selected="true">All</button>
        <button class="genre-tab" data-genre="action" role="tab" aria-selected="false">Action</button>
        <button class="genre-tab" data-genre="comedy" role="tab" aria-selected="false">Comedy</button>
        <button class="genre-tab" data-genre="drama" role="tab" aria-selected="false">Drama</button>
        <button class="genre-tab" data-genre="romance" role="tab" aria-selected="false">Romance</button>
        <button class="genre-tab" data-genre="adventure" role="tab" aria-selected="false">Adventure</button>
        <button class="genre-tab" data-genre="horror" role="tab" aria-selected="false">Horror</button>
        <button class="genre-tab" data-genre="sci-fi" role="tab" aria-selected="false">Sci-Fi</button>
        <button class="genre-tab" data-genre="thriller" role="tab" aria-selected="false">Thriller</button>
        <button class="genre-tab" data-genre="animation" role="tab" aria-selected="false">Animation</button>
        <button class="genre-tab" data-genre="family" role="tab" aria-selected="false">Family</button>
        <button class="genre-tab" data-genre="fantasy" role="tab" aria-selected="false">Fantasy</button>
        <button class="genre-tab" data-genre="crime" role="tab" aria-selected="false">Crime</button>
        <button class="genre-tab" data-genre="documentary" role="tab" aria-selected="false">Documentary</button>
      </div>

      <div class="filters">
        <div class="genre-search-container">
          <input id="genre" placeholder="Or type a genre..." aria-label="Search for a genre" />
          <ul id="genreSuggestions" class="genre-suggestions" role="listbox"></ul>
        </div>
        <button id="randomize" class="btn-primary" aria-label="Get a random movie">üé≤ Randomize</button>
      </div>

      <div style="margin-top:20px;padding-top:20px;border-top:1px solid rgba(196,30,58,.15);">
        <p class="subtitle" style="margin:0 0 12px;">Or search for a specific movie</p>
        <div class="search-container">
          <input id="movieSearch" type="text" placeholder="Search by title..." aria-label="Search for a specific movie" />
          <select id="platformFilter" aria-label="Filter by streaming platform">
            <option value="">All Platforms</option>
            <option value="Netflix">Netflix</option>
            <option value="Hulu">Hulu</option>
            <option value="Prime Video">Prime Video</option>
            <option value="Disney+">Disney+</option>
          </select>
          <button id="searchBtn" class="btn-primary" style="font-size:14px;">üîç Search</button>
        </div>
        <div id="searchResults" class="search-results-container"></div>
      </div>
      
    </section>

    <section id="result" class="result">
      <p class="hint">üëÜ Pick a genre and click "Randomize"</p>
    </section>

    <div class="saved-section">
      <section id="liked" class="saved-list liked-section">
        <h3>‚ù§Ô∏è Liked Movies</h3>
        <ul id="likedList"></ul>
        <button id="clearLiked" class="small secondary-btn">Clear liked</button>
      </section>

      <section id="watched" class="saved-list watched-section">
        <h3>‚úì Already Watched</h3>
        <ul id="watchedList"></ul>
        <button id="clearWatched" class="small secondary-btn">Clear watched</button>
      </section>

      <section id="disliked" class="saved-list disliked-section">
        <h3>üëé Disliked Movies</h3>
        <ul id="dislikedList"></ul>
        <button id="clearDisliked" class="small secondary-btn">Clear disliked</button>
      </section>
    </div>

    <div class="export-section">
      <button id="exportData" class="small secondary-btn">üíæ Export Data</button>
      <button id="importData" class="small secondary-btn">üì• Import Data</button>
      <input type="file" id="importFile" accept=".json" style="display:none;" />
    </div>
  </main>

  <script src="script.js"></script>
  
  <!-- Diagnostic script to debug GitHub Pages issues -->
  <script>
    window.addEventListener('load', () => {
      setTimeout(() => {
        console.log('=== PAGE LOAD DIAGNOSTIC ===');
        console.log('URL:', window.location.href);
        console.log('CSS loaded:', !!document.querySelector('link[href*="style.css"]'));
        console.log('searchBtn element:', document.getElementById('searchBtn'));
        console.log('movieSearch element:', document.getElementById('movieSearch'));
        console.log('searchResults container:', document.getElementById('searchResults'));
        console.log('allMovies count:', typeof allMovies !== 'undefined' ? allMovies.length : 'undefined');
        console.log('csvMovies count:', typeof csvMovies !== 'undefined' ? csvMovies.length : 'undefined');
        
        // Check computed styles
        const searchBtn = document.getElementById('searchBtn');
        if (searchBtn) {
          const styles = window.getComputedStyle(searchBtn);
          console.log('Search button computed styles:', {
            display: styles.display,
            visibility: styles.visibility,
            opacity: styles.opacity,
            backgroundColor: styles.backgroundColor
          });
        }
      }, 500);
    });
  </script>
</body>
</html>
